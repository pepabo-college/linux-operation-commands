## TOPコマンドについて

### 何を得ることができるか

* システム全体の負荷
* プロセス, CPU, メモリ, スワップの統計情報

### 使い方

* `$ top`: CPU使用率順にソート
* `$ top -p [PID]`: 特定のプロセスを監視
* `$ top -d1`: 1秒ごとに更新
* `$ top -c`: 実行されているコマンドの内容をフルパスにする
* `$ top -u`: 実行されているプロセスのユーザを指定する

### 操作コマンド

#### プロセスのソート

* shift + p: CPU使用率順
* shift + m: メモリ使用率順
* shift + t: 実行時間順

#### ツリー状に表示

* Shift + V: プロセスをツリー状に表示

#### プロセスをkillする

topコマンド実行中に「k」キーを実行することで、指定したPIDのプロセスをkillすることが出来る。
「PID to signal/kill」という表示がされるので、そこにkillしたいプロセスIDを入力する。

#### プロセスを優先度を変更(renice)する

topコマンド実行中に「r」キーを実行することで、指定したPIDのnice値を変更することが出来る。
「PID to renice」という表示がされるので、そこにreniceをしたいプロセスIDを入力、次の画面で変更する値を入力する。

### それぞれの意味について

### 1行目

現在時刻、稼働時間、現在のログインユーザ数、時間あたりの待機タスク数（1m, 5m, 15m）

### 2行目

* Tasks: 186 total //タスクの合計
* 1 running //稼働中のタスク数
* 185 sleeping //待機中のタスク数
* 0 stopped: //停止中のタスク数
* 0 zombie: //ゾンビタスク数

### 3行目（CPUの状態）

* 0.0%us //ユーザプロセスの使用時間
* 0.0%sy //システムプロセスの使用時間
* 0.0%ni //実行優先度を変更したユーザプロセスの使用時間
* 100.0%id //アイドル状態の時間
* 0.0%wa //I/Oの終了待をしている時間
* 0.0%hi //ハードウェア割込み要求での使用時間
* 0.0%si //ソフトウェア割込み要求での使用時間
* 0.0%st //OS仮想化利用時に、ほかの仮想CPUの計算で待たされた時間

### 4行目（メモリの状態）

* 3926176k total //メモリーの合計容量
* 1642168k used //使用中のメモリー容量
* 2284008k free //未使用のメモリー容量
* 143240k buffers //バッファとして使用されているメモリー容量

### 5行目（スワップ領域の状態）

* 6160376k total //スワップ領域の合計容量
* 0k used //使用中のスワップ領域の容量
* 6160376k free //未使用のスワップ領域の容量
* 923260k cached //キャッシュされているスワップ領域の容量

### 6行目

空白

### 7行目以降

（例）
```
PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
    1 root      20   0 19348 1528 1220 S  0.0  0.0   0:01.41 init
```

* PID //プロセスID
* USER //プロセスの実行ユーザ
* PR //プロセスの静的優先度(**値が低い方が優先度が高い**)
* NI //プロセスの相対優先度(0を基準とし、-20(優先度高) ～ 19(優先度低)で表している)
* VIRT //プロセスの仮想メモリーサイズ(スワップアウトしたメモリー使用量を加えたメモリー容量)
* RES //プロセスの使用しているメモリー容量(物理メモリー容量)
* SHR //プロセスの使用している共有メモリー容量
* S //プロセスの状態※
* %CPU //CPU使用率
* %MEM //物理メモリー使用率
* TIME+ //プロセスの実行時間
* COMMAND //プロセスで実行されているコマンド


#### ※プロセスの状態

S : スリープ
T : 停止中
D : 割り込み不可(sleep)
N : ナイス値がプラスの状態
< : ナイス値がマイナスの状態
R : 実行中
Z : ゾンビ状態
W : スワップアウト状態
